#!/usr/bin/python3

import requests 
import sys

from requests.utils import should_bypass_proxies


def runscript():
    try:
        domain = sys.argv[1]
        if(sys.argv[2] == 'd'):
            sublist = "resources/subdomains.txt"
        else:
            sublist = sys.argv[2]

        __main__(domain, sublist)

    except KeyboardInterrupt:
        print("\nbye...")
        sys.exit()



def banner():
    print("-"*50)
    print("BruteForce Subdomains. ")
    print("Usage : python3 subdomainenum.py <domain> <wordlist> ")
    print("")
    print("     -domain domain name of the target (dasith.works) ")
    print("     -wordlist Subdomain list (add 'd' for default)")
    print("-"*50)


def __main__(domain, sublist):

    sub_list = open(sublist).read()
    subdomains = sub_list.splitlines()

    for i in subdomains:
        sdomains = f"http://{i}.{domain}"
        try:
            requests.get(sdomains)
        
        except requests.ConnectionError:
            pass
        else:
            print("Valid domain: ", sdomains)


if len(sys.argv) == 3:
    banner()
    runscript()
else:
    banner()


